<h2>Task List</h2>

<form (ngSubmit)="addTask()">
    <input [(ngModel)]="newTask.title" name="title" placeholder="Task title" required>
    <textarea [(ngModel)]="newTask.description" name="description" placeholder="Description"></textarea>
    <select [(ngModel)]="newTask.priority" name="priority">
        <option value="low">Low</option>
        <option value="medium">Medium</option>
        <option value="high">High</option>
    </select>
    <button type="submit">Add Task</button>
</form>

<ul>
    @for (task of tasks; track task.id) {
        <li [class.completed-task]="task.completed">
            <span [class.completed]="task.completed">{{ task.title }}</span>
            @if (!task.completed) {
                <button (click)="markCompleted(+task.id)" 
                        [disabled]="completingTasks.has(+task.id)">
                    {{ completingTasks.has(+task.id) ? 'Completing...' : 'Complete' }}
                </button>
            }
            @if (task.completed) {
                <span class="completed-badge">âœ“ Completed</span>
            }
            <a class="details" [routerLink]="['/tasks', task.id]">Details</a>
        </li>
    }
</ul>